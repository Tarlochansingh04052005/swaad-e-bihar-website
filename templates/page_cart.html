{% extends "public_base.html" %}
{% block content %}
<section class="menu" style="padding-top: 2rem;">
  <div class="section__title">
    <p class="eyebrow">Open Cart</p>
    <h2>Review your cart and pay fast.</h2>
  </div>
  <div class="menu__grid">
    <article class="menu__card">
      <h3>Your cart</h3>
      {% if cart_items %}
      <p>Update quantities, then pay or call us to complete your order.</p>
      <div class="card__list" style="margin-top: 1rem;">
        {% for item in cart_items %}
        <div class="card__item">
          <span>{{ item.name }} (x{{ item.qty }})</span>
          <span>₹{{ item.line_total }}</span>
        </div>
        <div class="hero__actions" style="margin: 0.6rem 0 1rem;">
          <form method="post" action="/cart/add/{{ item.id }}">
            <button class="ghost" type="submit">+ Add one</button>
          </form>
          <form method="post" action="/cart/remove/{{ item.id }}">
            <button class="ghost" type="submit">- Remove one</button>
          </form>
        </div>
        {% endfor %}
        <div class="card__item">
          <span>Delivery</span>
          <span>₹{{ delivery_fee }}</span>
        </div>
      </div>
      <div class="menu__meta" style="margin-top: 1.2rem;">
        <span>Total</span>
        <span>₹{{ total }}</span>
      </div>
      <form class="order__form" method="post" action="/cart/checkout" style="margin-top: 1.5rem;">
        <label>
          Name
          <input type="text" name="name" value="{{ customer.name if customer }}" required />
        </label>
        <label>
          Phone
          <input type="text" name="phone" value="{{ customer.phone if customer }}" required />
        </label>
        <label>
          Delivery area
          <input type="text" name="area" value="{{ customer.address if customer }}" required />
        </label>
        <label>
          Notes (optional)
          <textarea name="notes" placeholder="Any special instructions"></textarea>
        </label>
        <div class="hero__actions" style="margin-top: 1rem;">
          <button class="primary" type="submit">Place order</button>
          <a class="ghost" href="tel:+917973193983">Call to order</a>
        </div>
      </form>
      <form method="post" action="/cart/clear" style="margin-top: 0.8rem;">
        <button class="ghost" type="submit">Clear cart</button>
      </form>
      {% else %}
      <p>Your cart is empty. Add items from the menu to get started.</p>
      <div class="hero__actions" style="margin-top: 1.5rem;">
        <a class="primary" href="/menu">Browse menu</a>
        <a class="ghost" href="tel:+917973193983">Call to order</a>
      </div>
      {% endif %}
    </article>
  </div>
</section>
{% endblock %}
